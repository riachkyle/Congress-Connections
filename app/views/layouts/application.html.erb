<!DOCTYPE html>
<html>
<head>
  <title>CongressConnections</title>
  <%= stylesheet_link_tag    'application', media: 'all', 'data-turbolinks-track' => true %>
  <%= javascript_include_tag 'application', 'data-turbolinks-track' => true %>
  <%= yield :javascript_includes %>
  <%= csrf_meta_tags %>
  <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.3.0-beta.17/angular.js"> </script>
<script> 
var congressApp = angular.module('congressApp',[])


congressApp.controller('Congress', ['$scope', 'SenateData', 'CommitteeData',
  function($scope, SenateData, CommitteeData) {

  $scope.senatordata = {};

  SenateData.getData().then(function(json){
    $scope.senatordata = json.data;
    console.log(json.data);
  });


  $scope.committeedata = {};

  CommitteeData.getData().then(function(json){
    $scope.committeedata = json.data;
    console.log(json.data);
  });

}]);

// create factory for the senators data
congressApp.factory('SenateData', ['$http', function($http){
  var senators = {};

  senators.getData = function(){
    var url = 'http://localhost:3000/senators';
    var endpoint = url; 
    return $http({ method: 'GET', url: endpoint });
  };

  return senators;

}]);

// create factory for the committees data
congressApp.factory('CommitteeData', ['$http', function($http){
  var committees = {};

  committees.getData = function(){
    var url = 'http://localhost:3000/committees';
    var endpoint = url; 
    return $http({ method: 'GET', url: endpoint });
  };

  return committees;

}]);
</script>
</head>
<body>

<%= yield %>

<p>Hello World</p>
<h1>Rails is fun!!!! Not!</h1>





</body>
</html>
