var json = {

        "nodes":[
            {
                 "id": "C001071",
                 "name": "Bob Corker",
                 "type": "senator"
               },
                           {
                 "id": "M000639",
                 "name": "Robert Menendez",
                 "type": "senator"
               },
                           {
                 "id": "R000584",
                 "name": "Jim Risch",
                 "api_uri":"http://api.nytimes.com/svc/politics/v3/us/legislative/congress/members/R000584.json",
                 "party": "R",
                 "rank_in_party": "2",
                 "state":"ID",
                 "note": "",
                 "begin_date":"2013-07-17",
                 "type": "senator"
               },
                           {
                 "id": "B000711",
                 "name": "Barbara Boxer",
                 "api_uri":"http://api.nytimes.com/svc/politics/v3/us/legislative/congress/members/B000711.json",
                 "party": "D",
                 "rank_in_party": "2",
                 "state":"CA",
                 "note": "",
                 "begin_date":"2013-07-17",
                 "type": "senator"
               },
                           {
                 "id": "R000595",
                 "name": "Marco Rubio",
                 "api_uri":"http://api.nytimes.com/svc/politics/v3/us/legislative/congress/members/R000595.json",
                 "party": "R",
                 "rank_in_party": "3",
                 "state":"FL",
                 "note": "",
                 "begin_date":"2013-07-17",
                 "type": "senator"
               },
                           {
                 "id": "C000141",
                 "name": "Benjamin L. Cardin",
                 "api_uri":"http://api.nytimes.com/svc/politics/v3/us/legislative/congress/members/C000141.json",
                 "party": "D",
                 "rank_in_party": "3",
                 "state":"MD",
                 "note": "",
                 "begin_date":"2013-07-17",
                 "type": "senator"
               },
                           {
                 "id": "J000293",
                 "name": "Ron Johnson",
                 "api_uri":"http://api.nytimes.com/svc/politics/v3/us/legislative/congress/members/J000293.json",
                 "party": "R",
                 "rank_in_party": "4",
                 "state":"WI",
                 "note": "",
                 "begin_date":"2013-07-17",
                 "type": "senator"
               },
                           {
                 "id": "C001070",
                 "name": "Bob Casey",
                 "api_uri":"http://api.nytimes.com/svc/politics/v3/us/legislative/congress/members/C001070.json",
                 "party": "D",
                 "rank_in_party": "4",
                 "state":"PA",
                 "note": "",
                 "begin_date":"2013-07-17",
                 "type": "senator"
               },
                           {
                 "id": "F000444",
                 "name": "Jeff Flake",
                 "api_uri":"http://api.nytimes.com/svc/politics/v3/us/legislative/congress/members/F000444.json",
                 "party": "R",
                 "rank_in_party": "5",
                 "state":"AZ",
                 "note": "",
                 "begin_date":"2013-07-17",
                 "type": "senator"
               },
                           {
                 "id": "S001181",
                 "name": "Jeanne Shaheen",
                 "api_uri":"http://api.nytimes.com/svc/politics/v3/us/legislative/congress/members/S001181.json",
                 "party": "D",
                 "rank_in_party": "5",
                 "state":"NH",
                 "note": "",
                 "begin_date":"2013-07-17",
                 "type": "senator"
               },
                           {
                 "id": "M000303",
                 "name": "John McCain",
                 "api_uri":"http://api.nytimes.com/svc/politics/v3/us/legislative/congress/members/M000303.json",
                 "party": "R",
                 "rank_in_party": "6",
                 "state":"AZ",
                 "note": "",
                 "begin_date":"2013-07-17",
                 "type": "senator"
               },
                           {
                 "id": "C001088",
                 "name": "Christopher A. Coons",
                 "api_uri":"http://api.nytimes.com/svc/politics/v3/us/legislative/congress/members/C001088.json",
                 "party": "D",
                 "rank_in_party": "6",
                 "state":"DE",
                 "note": "",
                 "begin_date":"2013-07-17",
                 "type": "senator"
               },
                           {
                 "id": "B001261",
                 "name": "John Barrasso",
                 "api_uri":"http://api.nytimes.com/svc/politics/v3/us/legislative/congress/members/B001261.json",
                 "party": "R",
                 "rank_in_party": "7",
                 "state":"WY",
                 "note": "",
                 "begin_date":"2013-07-17",
                 "type": "senator"
               },
                           {
                 "id": "U000039",
                 "name": "Tom Udall",
                 "api_uri":"http://api.nytimes.com/svc/politics/v3/us/legislative/congress/members/U000039.json",
                 "party": "D",
                 "rank_in_party": "7",
                 "state":"NM",
                 "note": "",
                 "begin_date":"2013-07-17",
                 "type": "senator"
               },
                           {
                 "id": "P000603",
                 "name": "Rand Paul",
                 "api_uri":"http://api.nytimes.com/svc/politics/v3/us/legislative/congress/members/P000603.json",
                 "party": "R",
                 "rank_in_party": "8",
                 "state":"KY",
                 "note": "",
                 "begin_date":"2013-07-17",
                 "type": "senator"
               },
                           {
                 "id": "M001169",
                 "name": "Christopher S. Murphy",
                 "api_uri":"http://api.nytimes.com/svc/politics/v3/us/legislative/congress/members/M001169.json",
                 "party": "D",
                 "rank_in_party": "8",
                 "state":"CT",
                 "note": "",
                 "begin_date":"2013-07-17",
                 "type": "senator"
               },
                           {
                 "id": "K000384",
                 "name": "Tim Kaine",
                 "api_uri":"http://api.nytimes.com/svc/politics/v3/us/legislative/congress/members/K000384.json",
                 "party": "D",
                 "rank_in_party": "9",
                 "state":"VA",
                 "note": "",
                 "begin_date":"2013-07-17",
                 "type": "senator"
               },
                           {
                 "id": "M000133",
                 "name": "Edward J. Markey",
                 "api_uri":"http://api.nytimes.com/svc/politics/v3/us/legislative/congress/members/M000133.json",
                 "party": "D",
                 "rank_in_party": "10",
                 "state":"MA",
                 "note": "",
                 "begin_date":"2013-07-17",
                 "type": "senator"
               },
               {
                 "id": "C001071",
                 "name": "Bob Corker",
                 "api_uri":"http://api.nytimes.com/svc/politics/v3/us/legislative/congress/members/C001071.json",
                 "party": "R",
                 "rank_in_party": "1",
                 "state":"TN",
                 "note": "",
                 "begin_date":"2013-07-17",
                 "type": "senator"
               },
                           {
                 "id": "M000639",
                 "name": "Robert Menendez",
                 "api_uri":"http://api.nytimes.com/svc/politics/v3/us/legislative/congress/members/M000639.json",
                 "party": "D",
                 "rank_in_party": "1",
                 "state":"NJ",
                 "note": "",
                 "begin_date":"2013-07-17",
                 "type": "senator"
               },
                           {
                 "id": "R000584",
                 "name": "Jim Risch",
                 "api_uri":"http://api.nytimes.com/svc/politics/v3/us/legislative/congress/members/R000584.json",
                 "party": "R",
                 "rank_in_party": "2",
                 "state":"ID",
                 "note": "",
                 "begin_date":"2013-07-17",
                 "type": "senator"
               },
                           {
                 "id": "B000711",
                 "name": "Barbara Boxer",
                 "api_uri":"http://api.nytimes.com/svc/politics/v3/us/legislative/congress/members/B000711.json",
                 "party": "D",
                 "rank_in_party": "2",
                 "state":"CA",
                 "note": "",
                 "begin_date":"2013-07-17",
                 "type": "senator"
               },
                           {
                 "id": "R000595",
                 "name": "Marco Rubio",
                 "api_uri":"http://api.nytimes.com/svc/politics/v3/us/legislative/congress/members/R000595.json",
                 "party": "R",
                 "rank_in_party": "3",
                 "state":"FL",
                 "note": "",
                 "begin_date":"2013-07-17",
                 "type": "senator"
               },
                           {
                 "id": "C000141",
                 "name": "Benjamin L. Cardin",
                 "api_uri":"http://api.nytimes.com/svc/politics/v3/us/legislative/congress/members/C000141.json",
                 "party": "D",
                 "rank_in_party": "3",
                 "state":"MD",
                 "note": "",
                 "begin_date":"2013-07-17",
                 "type": "senator"
               },
                           {
                 "id": "J000293",
                 "name": "Ron Johnson",
                 "api_uri":"http://api.nytimes.com/svc/politics/v3/us/legislative/congress/members/J000293.json",
                 "party": "R",
                 "rank_in_party": "4",
                 "state":"WI",
                 "note": "",
                 "begin_date":"2013-07-17",
                 "type": "senator"
               },
                           {
                 "id": "C001070",
                 "name": "Bob Casey",
                 "api_uri":"http://api.nytimes.com/svc/politics/v3/us/legislative/congress/members/C001070.json",
                 "party": "D",
                 "rank_in_party": "4",
                 "state":"PA",
                 "note": "",
                 "begin_date":"2013-07-17",
                 "type": "senator"
               },
                           {
                 "id": "F000444",
                 "name": "Jeff Flake",
                 "api_uri":"http://api.nytimes.com/svc/politics/v3/us/legislative/congress/members/F000444.json",
                 "party": "R",
                 "rank_in_party": "5",
                 "state":"AZ",
                 "note": "",
                 "begin_date":"2013-07-17",
                 "type": "senator"
               },
                           {
                 "id": "S001181",
                 "name": "Jeanne Shaheen",
                 "api_uri":"http://api.nytimes.com/svc/politics/v3/us/legislative/congress/members/S001181.json",
                 "party": "D",
                 "rank_in_party": "5",
                 "state":"NH",
                 "note": "",
                 "begin_date":"2013-07-17",
                 "type": "senator"
               },
                           {
                 "id": "M000303",
                 "name": "John McCain",
                 "api_uri":"http://api.nytimes.com/svc/politics/v3/us/legislative/congress/members/M000303.json",
                 "party": "R",
                 "rank_in_party": "6",
                 "state":"AZ",
                 "note": "",
                 "begin_date":"2013-07-17",
                 "type": "senator"
               },
                           {
                 "id": "C001088",
                 "name": "Christopher A. Coons",
                 "api_uri":"http://api.nytimes.com/svc/politics/v3/us/legislative/congress/members/C001088.json",
                 "party": "D",
                 "rank_in_party": "6",
                 "state":"DE",
                 "note": "",
                 "begin_date":"2013-07-17",
                 "type": "senator"
               },
                           {
                 "id": "B001261",
                 "name": "John Barrasso",
                 "api_uri":"http://api.nytimes.com/svc/politics/v3/us/legislative/congress/members/B001261.json",
                 "party": "R",
                 "rank_in_party": "7",
                 "state":"WY",
                 "note": "",
                 "begin_date":"2013-07-17",
                 "type": "senator"
               },
                           {
                 "id": "U000039",
                 "name": "Tom Udall",
                 "api_uri":"http://api.nytimes.com/svc/politics/v3/us/legislative/congress/members/U000039.json",
                 "party": "D",
                 "rank_in_party": "7",
                 "state":"NM",
                 "note": "",
                 "begin_date":"2013-07-17",
                 "type": "senator"
               },
                           {
                 "id": "P000603",
                 "name": "Rand Paul",
                 "api_uri":"http://api.nytimes.com/svc/politics/v3/us/legislative/congress/members/P000603.json",
                 "party": "R",
                 "rank_in_party": "8",
                 "state":"KY",
                 "note": "",
                 "begin_date":"2013-07-17",
                 "type": "senator"
               },
                           {
                 "id": "M001169",
                 "name": "Christopher S. Murphy",
                 "api_uri":"http://api.nytimes.com/svc/politics/v3/us/legislative/congress/members/M001169.json",
                 "party": "D",
                 "rank_in_party": "8",
                 "state":"CT",
                 "note": "",
                 "begin_date":"2013-07-17",
                 "type": "senator"
               },
                           {
                 "id": "K000384",
                 "name": "Tim Kaine",
                 "api_uri":"http://api.nytimes.com/svc/politics/v3/us/legislative/congress/members/K000384.json",
                 "party": "D",
                 "rank_in_party": "9",
                 "state":"VA",
                 "note": "",
                 "begin_date":"2013-07-17",
                 "type": "senator"
               },
                           {
                 "id": "M000133",
                 "name": "Edward J. Markey",
                 "api_uri":"http://api.nytimes.com/svc/politics/v3/us/legislative/congress/members/M000133.json",
                 "party": "D",
                 "rank_in_party": "10",
                 "state":"MA",
                 "note": "",
                 "begin_date":"2013-07-17",
                 "type": "senator"
               },
               {
                 "id": "C001071",
                 "name": "Bob Corker",
                 "api_uri":"http://api.nytimes.com/svc/politics/v3/us/legislative/congress/members/C001071.json",
                 "party": "R",
                 "rank_in_party": "1",
                 "state":"TN",
                 "note": "",
                 "begin_date":"2013-07-17",
                 "type": "senator"
               },
                           {
                 "id": "M000639",
                 "name": "Robert Menendez",
                 "api_uri":"http://api.nytimes.com/svc/politics/v3/us/legislative/congress/members/M000639.json",
                 "party": "D",
                 "rank_in_party": "1",
                 "state":"NJ",
                 "note": "",
                 "begin_date":"2013-07-17",
                 "type": "senator"
               },
                           {
                 "id": "R000584",
                 "name": "Jim Risch",
                 "api_uri":"http://api.nytimes.com/svc/politics/v3/us/legislative/congress/members/R000584.json",
                 "party": "R",
                 "rank_in_party": "2",
                 "state":"ID",
                 "note": "",
                 "begin_date":"2013-07-17",
                 "type": "senator"
               },
                           {
                 "id": "B000711",
                 "name": "Barbara Boxer",
                 "api_uri":"http://api.nytimes.com/svc/politics/v3/us/legislative/congress/members/B000711.json",
                 "party": "D",
                 "rank_in_party": "2",
                 "state":"CA",
                 "note": "",
                 "begin_date":"2013-07-17",
                 "type": "senator"
               },
                           {
                 "id": "R000595",
                 "name": "Marco Rubio",
                 "api_uri":"http://api.nytimes.com/svc/politics/v3/us/legislative/congress/members/R000595.json",
                 "party": "R",
                 "rank_in_party": "3",
                 "state":"FL",
                 "note": "",
                 "begin_date":"2013-07-17",
                 "type": "senator"
               },
                           {
                 "id": "C000141",
                 "name": "Benjamin L. Cardin",
                 "api_uri":"http://api.nytimes.com/svc/politics/v3/us/legislative/congress/members/C000141.json",
                 "party": "D",
                 "rank_in_party": "3",
                 "state":"MD",
                 "note": "",
                 "begin_date":"2013-07-17",
                 "type": "senator"
               },
                           {
                 "id": "J000293",
                 "name": "Ron Johnson",
                 "api_uri":"http://api.nytimes.com/svc/politics/v3/us/legislative/congress/members/J000293.json",
                 "party": "R",
                 "rank_in_party": "4",
                 "state":"WI",
                 "note": "",
                 "begin_date":"2013-07-17",
                 "type": "senator"
               },
                           {
                 "id": "C001070",
                 "name": "Bob Casey",
                 "api_uri":"http://api.nytimes.com/svc/politics/v3/us/legislative/congress/members/C001070.json",
                 "party": "D",
                 "rank_in_party": "4",
                 "state":"PA",
                 "note": "",
                 "begin_date":"2013-07-17",
                 "type": "senator"
               },
                           {
                 "id": "F000444",
                 "name": "Jeff Flake",
                 "api_uri":"http://api.nytimes.com/svc/politics/v3/us/legislative/congress/members/F000444.json",
                 "party": "R",
                 "rank_in_party": "5",
                 "state":"AZ",
                 "note": "",
                 "begin_date":"2013-07-17",
                 "type": "senator"
               },
                           {
                 "id": "S001181",
                 "name": "Jeanne Shaheen",
                 "api_uri":"http://api.nytimes.com/svc/politics/v3/us/legislative/congress/members/S001181.json",
                 "party": "D",
                 "rank_in_party": "5",
                 "state":"NH",
                 "note": "",
                 "begin_date":"2013-07-17",
                 "type": "senator"
               },
                           {
                 "id": "M000303",
                 "name": "John McCain",
                 "api_uri":"http://api.nytimes.com/svc/politics/v3/us/legislative/congress/members/M000303.json",
                 "party": "R",
                 "rank_in_party": "6",
                 "state":"AZ",
                 "note": "",
                 "begin_date":"2013-07-17",
                 "type": "senator"
               },
                           {
                 "id": "C001088",
                 "name": "Christopher A. Coons",
                 "api_uri":"http://api.nytimes.com/svc/politics/v3/us/legislative/congress/members/C001088.json",
                 "party": "D",
                 "rank_in_party": "6",
                 "state":"DE",
                 "note": "",
                 "begin_date":"2013-07-17",
                 "type": "senator"
               },
                           {
                 "id": "B001261",
                 "name": "John Barrasso",
                 "api_uri":"http://api.nytimes.com/svc/politics/v3/us/legislative/congress/members/B001261.json",
                 "party": "R",
                 "rank_in_party": "7",
                 "state":"WY",
                 "note": "",
                 "begin_date":"2013-07-17",
                 "type": "senator"
               },
                           {
                 "id": "U000039",
                 "name": "Tom Udall",
                 "api_uri":"http://api.nytimes.com/svc/politics/v3/us/legislative/congress/members/U000039.json",
                 "party": "D",
                 "rank_in_party": "7",
                 "state":"NM",
                 "note": "",
                 "begin_date":"2013-07-17",
                 "type": "senator"
               },
                           {
                 "id": "P000603",
                 "name": "Rand Paul",
                 "api_uri":"http://api.nytimes.com/svc/politics/v3/us/legislative/congress/members/P000603.json",
                 "party": "R",
                 "rank_in_party": "8",
                 "state":"KY",
                 "note": "",
                 "begin_date":"2013-07-17",
                 "type": "senator"
               },
                           {
                 "id": "M001169",
                 "name": "Christopher S. Murphy",
                 "api_uri":"http://api.nytimes.com/svc/politics/v3/us/legislative/congress/members/M001169.json",
                 "party": "D",
                 "rank_in_party": "8",
                 "state":"CT",
                 "note": "",
                 "begin_date":"2013-07-17",
                 "type": "senator"
               },
                           {
                 "id": "K000384",
                 "name": "Tim Kaine",
                 "api_uri":"http://api.nytimes.com/svc/politics/v3/us/legislative/congress/members/K000384.json",
                 "party": "D",
                 "rank_in_party": "9",
                 "state":"VA",
                 "note": "",
                 "begin_date":"2013-07-17",
                 "type": "senator"
               },
                           {
                 "id": "M000133",
                 "name": "Edward J. Markey",
                 "api_uri":"http://api.nytimes.com/svc/politics/v3/us/legislative/congress/members/M000133.json",
                 "party": "D",
                 "rank_in_party": "10",
                 "state":"MA",
                 "note": "",
                 "begin_date":"2013-07-17",
                  "type": "senator"
               },
               {
                 "id": "C001071",
                 "name": "Bob Corker",
                 "api_uri":"http://api.nytimes.com/svc/politics/v3/us/legislative/congress/members/C001071.json",
                 "party": "R",
                 "rank_in_party": "1",
                 "state":"TN",
                 "note": "",
                 "begin_date":"2013-07-17",
                 "type": "senator"
               },
                           {
                 "id": "M000639",
                 "name": "Robert Menendez",
                 "api_uri":"http://api.nytimes.com/svc/politics/v3/us/legislative/congress/members/M000639.json",
                 "party": "D",
                 "rank_in_party": "1",
                 "state":"NJ",
                 "note": "",
                 "begin_date":"2013-07-17",
                 "type": "senator"
               },
                           {
                 "id": "R000584",
                 "name": "Jim Risch",
                 "api_uri":"http://api.nytimes.com/svc/politics/v3/us/legislative/congress/members/R000584.json",
                 "party": "R",
                 "rank_in_party": "2",
                 "state":"ID",
                 "note": "",
                 "begin_date":"2013-07-17",
                 "type": "senator"
               },
                           {
                 "id": "B000711",
                 "name": "Barbara Boxer",
                 "api_uri":"http://api.nytimes.com/svc/politics/v3/us/legislative/congress/members/B000711.json",
                 "party": "D",
                 "rank_in_party": "2",
                 "state":"CA",
                 "note": "",
                 "begin_date":"2013-07-17",
                 "type": "senator"
               },
                           {
                 "id": "R000595",
                 "name": "Marco Rubio",
                 "api_uri":"http://api.nytimes.com/svc/politics/v3/us/legislative/congress/members/R000595.json",
                 "party": "R",
                 "rank_in_party": "3",
                 "state":"FL",
                 "note": "",
                 "begin_date":"2013-07-17",
                 "type": "senator"
               },
                           {
                 "id": "C000141",
                 "name": "Benjamin L. Cardin",
                 "api_uri":"http://api.nytimes.com/svc/politics/v3/us/legislative/congress/members/C000141.json",
                 "party": "D",
                 "rank_in_party": "3",
                 "state":"MD",
                 "note": "",
                 "begin_date":"2013-07-17",
                 "type": "senator"
               },
                           {
                 "id": "J000293",
                 "name": "Ron Johnson",
                 "api_uri":"http://api.nytimes.com/svc/politics/v3/us/legislative/congress/members/J000293.json",
                 "party": "R",
                 "rank_in_party": "4",
                 "state":"WI",
                 "note": "",
                 "begin_date":"2013-07-17",
                 "type": "senator"
               },
                           {
                 "id": "C001070",
                 "name": "Bob Casey",
                 "api_uri":"http://api.nytimes.com/svc/politics/v3/us/legislative/congress/members/C001070.json",
                 "party": "D",
                 "rank_in_party": "4",
                 "state":"PA",
                 "note": "",
                 "begin_date":"2013-07-17",
                 "type": "senator"
               },
                           {
                 "id": "F000444",
                 "name": "Jeff Flake",
                 "api_uri":"http://api.nytimes.com/svc/politics/v3/us/legislative/congress/members/F000444.json",
                 "party": "R",
                 "rank_in_party": "5",
                 "state":"AZ",
                 "note": "",
                 "begin_date":"2013-07-17",
                 "type": "senator"
               },
                           {
                 "id": "S001181",
                 "name": "Jeanne Shaheen",
                 "api_uri":"http://api.nytimes.com/svc/politics/v3/us/legislative/congress/members/S001181.json",
                 "party": "D",
                 "rank_in_party": "5",
                 "state":"NH",
                 "note": "",
                 "begin_date":"2013-07-17",
                 "type": "senator"
               },
                           {
                 "id": "M000303",
                 "name": "John McCain",
                 "api_uri":"http://api.nytimes.com/svc/politics/v3/us/legislative/congress/members/M000303.json",
                 "party": "R",
                 "rank_in_party": "6",
                 "state":"AZ",
                 "note": "",
                 "begin_date":"2013-07-17",
                 "type": "senator"
               },
                           {
                 "id": "C001088",
                 "name": "Christopher A. Coons",
                 "api_uri":"http://api.nytimes.com/svc/politics/v3/us/legislative/congress/members/C001088.json",
                 "party": "D",
                 "rank_in_party": "6",
                 "state":"DE",
                 "note": "",
                 "begin_date":"2013-07-17",
                 "type": "senator"
               },
                           {
                 "id": "B001261",
                 "name": "John Barrasso",
                 "api_uri":"http://api.nytimes.com/svc/politics/v3/us/legislative/congress/members/B001261.json",
                 "party": "R",
                 "rank_in_party": "7",
                 "state":"WY",
                 "note": "",
                 "begin_date":"2013-07-17",
                 "type": "senator"
               },
                           {
                 "id": "U000039",
                 "name": "Tom Udall",
                 "api_uri":"http://api.nytimes.com/svc/politics/v3/us/legislative/congress/members/U000039.json",
                 "party": "D",
                 "rank_in_party": "7",
                 "state":"NM",
                 "note": "",
                 "begin_date":"2013-07-17",
                 "type": "senator"
               },
                           {
                 "id": "P000603",
                 "name": "Rand Paul",
                 "api_uri":"http://api.nytimes.com/svc/politics/v3/us/legislative/congress/members/P000603.json",
                 "party": "R",
                 "rank_in_party": "8",
                 "state":"KY",
                 "note": "",
                 "begin_date":"2013-07-17",
                 "type": "senator"
               },
                           {
                 "id": "M001169",
                 "name": "Christopher S. Murphy",
                 "api_uri":"http://api.nytimes.com/svc/politics/v3/us/legislative/congress/members/M001169.json",
                 "party": "D",
                 "rank_in_party": "8",
                 "state":"CT",
                 "note": "",
                 "begin_date":"2013-07-17",
                 "type": "senator"
               },
                           {
                 "id": "K000384",
                 "name": "Tim Kaine",
                 "api_uri":"http://api.nytimes.com/svc/politics/v3/us/legislative/congress/members/K000384.json",
                 "party": "D",
                 "rank_in_party": "9",
                 "state":"VA",
                 "note": "",
                 "begin_date":"2013-07-17",
                 "type": "senator"
               },
                           {
                 "id": "M000133",
                 "name": "Edward J. Markey",
                 "api_uri":"http://api.nytimes.com/svc/politics/v3/us/legislative/congress/members/M000133.json",
                 "party": "D",
                 "rank_in_party": "10",
                 "state":"MA",
                 "note": "",
                 "begin_date":"2013-07-17",
                  "type": "senator"
               },
               {
                 "id": "C001071",
                 "name": "Bob Corker",
                 "api_uri":"http://api.nytimes.com/svc/politics/v3/us/legislative/congress/members/C001071.json",
                 "party": "R",
                 "rank_in_party": "1",
                 "state":"TN",
                 "note": "",
                 "begin_date":"2013-07-17",
                 "type": "senator"
               },
                           {
                 "id": "M000639",
                 "name": "Robert Menendez",
                 "api_uri":"http://api.nytimes.com/svc/politics/v3/us/legislative/congress/members/M000639.json",
                 "party": "D",
                 "rank_in_party": "1",
                 "state":"NJ",
                 "note": "",
                 "begin_date":"2013-07-17",
                 "type": "senator"
               },
                           {
                 "id": "R000584",
                 "name": "Jim Risch",
                 "api_uri":"http://api.nytimes.com/svc/politics/v3/us/legislative/congress/members/R000584.json",
                 "party": "R",
                 "rank_in_party": "2",
                 "state":"ID",
                 "note": "",
                 "begin_date":"2013-07-17",
                 "type": "senator"
               },
                           {
                 "id": "B000711",
                 "name": "Barbara Boxer",
                 "api_uri":"http://api.nytimes.com/svc/politics/v3/us/legislative/congress/members/B000711.json",
                 "party": "D",
                 "rank_in_party": "2",
                 "state":"CA",
                 "note": "",
                 "begin_date":"2013-07-17",
                 "type": "senator"
               },
                           {
                 "id": "R000595",
                 "name": "Marco Rubio",
                 "api_uri":"http://api.nytimes.com/svc/politics/v3/us/legislative/congress/members/R000595.json",
                 "party": "R",
                 "rank_in_party": "3",
                 "state":"FL",
                 "note": "",
                 "begin_date":"2013-07-17",
                 "type": "senator"
               },
                           {
                 "id": "C000141",
                 "name": "Benjamin L. Cardin",
                 "api_uri":"http://api.nytimes.com/svc/politics/v3/us/legislative/congress/members/C000141.json",
                 "party": "D",
                 "rank_in_party": "3",
                 "state":"MD",
                 "note": "",
                 "begin_date":"2013-07-17",
                 "type": "senator"
               },
                           {
                 "id": "J000293",
                 "name": "Ron Johnson",
                 "api_uri":"http://api.nytimes.com/svc/politics/v3/us/legislative/congress/members/J000293.json",
                 "party": "R",
                 "rank_in_party": "4",
                 "state":"WI",
                 "note": "",
                 "begin_date":"2013-07-17",
                 "type": "senator"
               },
                           {
                 "id": "C001070",
                 "name": "Bob Casey",
                 "api_uri":"http://api.nytimes.com/svc/politics/v3/us/legislative/congress/members/C001070.json",
                 "party": "D",
                 "rank_in_party": "4",
                 "state":"PA",
                 "note": "",
                 "begin_date":"2013-07-17",
                 "type": "senator"
               },
                           {
                 "id": "F000444",
                 "name": "Jeff Flake",
                 "api_uri":"http://api.nytimes.com/svc/politics/v3/us/legislative/congress/members/F000444.json",
                 "party": "R",
                 "rank_in_party": "5",
                 "state":"AZ",
                 "note": "",
                 "begin_date":"2013-07-17",
                 "type": "senator"
               },
                           {
                 "id": "S001181",
                 "name": "Jeanne Shaheen",
                 "api_uri":"http://api.nytimes.com/svc/politics/v3/us/legislative/congress/members/S001181.json",
                 "party": "D",
                 "rank_in_party": "5",
                 "state":"NH",
                 "note": "",
                 "begin_date":"2013-07-17",
                 "type": "senator"
               },
                           {
                 "id": "M000303",
                 "name": "John McCain",
                 "api_uri":"http://api.nytimes.com/svc/politics/v3/us/legislative/congress/members/M000303.json",
                 "party": "R",
                 "rank_in_party": "6",
                 "state":"AZ",
                 "note": "",
                 "begin_date":"2013-07-17",
                 "type": "senator"
               },
                           {
                 "id": "C001088",
                 "name": "Christopher A. Coons",
                 "api_uri":"http://api.nytimes.com/svc/politics/v3/us/legislative/congress/members/C001088.json",
                 "party": "D",
                 "rank_in_party": "6",
                 "state":"DE",
                 "note": "",
                 "begin_date":"2013-07-17",
                 "type": "senator"
               },
                           {
                 "id": "B001261",
                 "name": "John Barrasso",
                 "api_uri":"http://api.nytimes.com/svc/politics/v3/us/legislative/congress/members/B001261.json",
                 "party": "R",
                 "rank_in_party": "7",
                 "state":"WY",
                 "note": "",
                 "begin_date":"2013-07-17",
                 "type": "senator"
               },
                           {
                 "id": "U000039",
                 "name": "Tom Udall",
                 "api_uri":"http://api.nytimes.com/svc/politics/v3/us/legislative/congress/members/U000039.json",
                 "party": "D",
                 "rank_in_party": "7",
                 "state":"NM",
                 "note": "",
                 "begin_date":"2013-07-17",
                 "type": "senator"
               },
                           {
                 "id": "P000603",
                 "name": "Rand Paul",
                 "api_uri":"http://api.nytimes.com/svc/politics/v3/us/legislative/congress/members/P000603.json",
                 "party": "R",
                 "rank_in_party": "8",
                 "state":"KY",
                 "note": "",
                 "begin_date":"2013-07-17",
                 "type": "senator"
               },
                           {
                 "id": "uniqueID3",
                 "name": "Christopher S. Murphy",
                 "api_uri":"http://api.nytimes.com/svc/politics/v3/us/legislative/congress/members/M001169.json",
                 "party": "D",
                 "rank_in_party": "8",
                 "state":"CT",
                 "note": "",
                 "begin_date":"2013-07-17",
                 "type": "senator"
               },
                           {
                 "id": "uniqueID2",
                 "name": "Tim Kaine",
                 "api_uri":"http://api.nytimes.com/svc/politics/v3/us/legislative/congress/members/K000384.json",
                 "party": "D",
                 "rank_in_party": "9",
                 "state":"VA",
                 "note": "",
                 "begin_date":"2013-07-17",
                 "type": "senator"
               },
                           {
                 "id": "uniqueID1",
                 "name": "Edward J. Markey",
                 "api_uri":"http://api.nytimes.com/svc/politics/v3/us/legislative/congress/members/M000133.json",
                 "party": "D",
                 "rank_in_party": "10",
                 "state":"MA",
                 "note": "",
                 "begin_date":"2013-07-17",
                 "type": "senator"
               },
               {
                "id": "uniqueID4",
                "name": "committee1",
                "type": "committee"
               },
               {
                "id": "uniqueID5",
                "name": "committee2",
                "type": "committee"
               },
               {
                "id": "uniqueID6",
                "name": "Finance Committee",
                "type": "committee"
               },
                {
                "id": "uniqueID7",
                "name": "Committee on Foreign Relations",
                "type": "committee"
               }
             ],
             "links": [
                {"source": "uniqueID1", "target": "uniqueID4"},
                {"source": "uniqueID2", "target": "uniqueID5"},
                {"source": "uniqueID3", "target": "uniqueID6"},
                {"source": "uniqueID3", "target": "uniqueID7"}
             ]
    };

    newLinks = [
                    {"source": "uniqueID1", "target": "uniqueID6"},
                    {"source": "uniqueID2", "target": "uniqueID6"}
                ];

    newCommittees = [
            {
                "id": "uniqueID6",
                "name": "committee1",
                "type": "committee"
               },
               {
                "id": "uniqueID6",
                "name": "committee2",
                "type": "committee"
               },
    ]


window.onload = function(){
	
    drawGraph();
}

var drawGraph = function(){

    console.log(json.links)

    

    var width = 800;
    var height = 800;

    var senators = [];

    var committees = [];

    
    // --- Set Up the Data --- //

    function setupData(data){

        mapNodes = function (nodes){
            nodesMap = d3.map()
            nodes.forEach(function(n){
                nodesMap.set(n.id, n)
            })
            return nodesMap;
        }

        var nodesMap = mapNodes(data.nodes)

        var links = data.links;
        
        var linkedByIndex = {};

        links.forEach(function(l){
            l.source = nodesMap.get(l.source);
            l.target = nodesMap.get(l.target);

            linkedByIndex["#{l.source.id},#{l.target.id}"] = 1;
        })
        
        //push senators to senator array and committees to committee array
        json.nodes.forEach(function(n){
            if (n.type == "senator"){
                senators.push(n)
            }
            else if(n.type == "committee"){
                committees.push(n)
            }
        });

        return data;

    };

    data = setupData(json);

    var color = d3.scale.category20();

    
    // --- Outer Force for Senators --- //
    //this force will push the senators into a circle on the outside of the visualization

    var force = d3.layout.force()
                .charge(-20)
                .linkDistance(0)
                .size([width, height]);

    // --- Inner Force for Groups --- //
    //this force will group the groups (committees, industries, etc.) into a forced layout in the center of the circle

    var force2 = d3.layout.force()
                .charge(-160)
                .linkDistance(0)
                .size([width, height]);

    var svg = d3.select("body")
                .append("svg")
                .attr("width", width)
                .attr("height", height)

    force
            .nodes(senators)
            .start();

    force2
            .nodes(committees)
            .start();


    var link = svg.selectAll(".line")
                .data(data.links);

    link.enter()
                .append("line")
                .attr("x1", function(d){
                    return d.source.x
                })
                .attr("y1", function(d){
                    return d.source.y
                })
                .attr("x2", function(d){
                    return d.target.x
                })
                .attr("y2", function(d){
                    return d.target.y
                })
                .attr("class", "link")
                .attr("stroke", "#ddd")
                .attr("stroke-opacity", 0.8);

    link.exit().remove();

    var node = svg.selectAll(".node")
                .data(senators.concat(committees))
                
    node.enter()
                .append("circle")
                .attr("class", "node")
                .attr("r", function(d){
                    if (d.type == "senator"){
                        return 6
                    }
                    else{
                        return 20
                    }
                })
                .style("fill", function(d) {
                    if (d.party == "R"){
                        return "rgb(255,0,0)";
                    }
                    else if (d.party == "D"){
                        return "rgb(0,0,255)"
                    }
                    else{

                     }
                });

    node.exit().remove();


    node.append("title")
            .text(function(d) { return d.name; });

        force.on("tick", function(e) {

                var firstCircle = 0;

                //count number of senators to make up the first circle (should almost always be equal to 100 but in case of certain circumstances, should be counted)
                json.nodes.forEach(function(n){
                        if (n.type == "senator"){
                            firstCircle++
                    }
                });

            
            senators.forEach(function(o, i){
                
                k = e.alpha * 0.1;

                if (o.type == "senator"){
                    o.x += (centerPlacement(600, 90, i).x - o.x) * k;
                    o.y += (centerPlacement(600, 90, i).y - o.y) * k;
                }
            });

            link.attr("x1", function(d) { return d.source.x })
                .attr("y1", function(d) { return d.source.y });

            node.attr("cx", function(d) { return d.x })
                .attr("cy", function(d) { return d.y });
        });

        force2.on("tick", function(e) {

            link.attr("x2", function(d) { return d.target.x })
                .attr("y2", function(d) { return d.target.y });

            node.attr("cx", function(d) { return d.x })
                .attr("cy", function(d) { return d.y });

        });

        
        //Find the center value for the nodes that they will gravitate to
        centerPlacement = function(radius, keyLength, nodeIndex){

            //the x value is a function of cosine and the index value of the node
            var x = (width/2 + radius * Math.cos((360/keyLength * nodeIndex) * Math.PI / 180));

            //the y value is a function of sine and the index value they will gravitate to
            var y = ((height/2 + radius * Math.sin((360/keyLength * nodeIndex) * Math.PI / 180)));

            return {"x": x, "y": y}

        };


        // --- Update Data Function --- //

        function update(data){
            

            // --- Update Nodes Data --- //

            function updateNodes(senatorsArray, committeesArray){

                mapNodes = function (nodes){
                    nodesMap = d3.map()
                    nodes.forEach(function(n){
                        nodesMap.set(n.id, n)
                    })
                    return nodesMap;
                }

                if (!senators){
                    committees = committeesArray;
                    nodesMap = mapNodes(senators.concat(committees));
                }
                else if (!committees){
                    senators = senatorsArray;
                    nodesMap = mapNodes(senators.concat(committees));
                }
                else{
                    committees = committeesArray;
                    senators = senatorsArray;
                    nodesMap = mapNodes(senators.concat(committees));

                }

            }; // end of updateNodes()

            function updateLinks(links){ 

                links.forEach(function(l){
                    l.source = nodesMap.get(l.source);
                    l.target = nodesMap.get(l.target);

                })


            }; // end of updateLinks()

            function updateGraph(){

                force
                        .nodes(senators)
                        .start();

                force2
                        .nodes(committees)
                        .start();

                var node = svg.selectAll(".node")
                .data(senators.concat(committees))
                
                node.enter()
                            .append("circle")
                            .attr("class", "node")
                            .attr("r", function(d){
                                if (d.type == "senator"){
                                    return 6
                                }
                                else{
                                    return 20
                                }
                            })
                            .style("fill", function(d) {
                                if (d.party == "R"){
                                    return "rgb(255,0,0)";
                                }
                                else if (d.party == "D"){
                                    return "rgb(0,0,255)"
                                }
                                else{

                                 }
                            });

                node.exit().remove();


                node.append("title")
                        .text(function(d) { return d.name; });

                var link = svg.selectAll(".line")
                    .data(newLinks);

                link = svg.selectAll("line.link")
                    .data(newLinks)

                link.enter()
                            .append("line")
                            .attr("class", "link")
                            .attr("stroke", "#ddd")
                            .attr("stroke-opacity", 0.8)
                            .attr("x1", function(d){
                                return d.source.x
                            })
                            .attr("y1", function(d){
                                return d.source.y
                            })
                            .attr("x2", function(d){
                                return d.target.x
                            })
                            .attr("y2", function(d){
                                return d.target.y
                            })
                            .attr("class", "link")
                            .attr("stroke", "#ddd")
                            .attr("stroke-opacity", 0.8);

                link.exit().remove();

                console.log(newLinks);

            } //end of updateGraph()

            
            // --- Run the Functions --- //

            updateNodes(senators, newCommittees);
            updateLinks(newLinks);
            updateGraph();

        }// end of update()

        document.getElementById("update").onclick = function(){
            update();
        };

        



}